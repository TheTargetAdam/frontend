{"ast":null,"code":"import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\n// ,prepareHeaders:(headers,{getState})=>{\n//   const token=store.getState().auth.token\n//   if(token){\n//     headers.set('Authorization',`Bearer ${token}`)\n//   }\n//   return headers\n// }\nexport const productApi = createApi({\n  reducerPath: \"api/orders\",\n  tagTypes: ['orders'],\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'https://localhost:7197'\n  }),\n  endpoints: build => ({\n    // getProducts:build.query<IOrderResponse,number>({\n    //     // query:(count:number)=>`Orders/GetAllOrders`\n    //     query:(page:number)=>({\n    //         url:`api/orders?page=${page}`,\n    //         responseHandler:(response)=>response.json()\n    //     })\n    // }),\n    getProducts: build.query({\n      query: arg => {\n        const {\n          page,\n          topics\n        } = arg;\n        console.log('arg: ', arg);\n        return {\n          url: 'api/orders',\n          params: {\n            page,\n            topics\n          }\n        };\n      }\n    }),\n    getString: build.query({\n      query: count => ({\n        url: `Orders/GetAllOrdersstring`,\n        responseHandler: response => response.text()\n      })\n    }),\n    getUserProducts: build.query({\n      query: arg => {\n        const {\n          page,\n          userId\n        } = arg;\n        console.log('arg: ', arg);\n        return {\n          url: 'api/orders/userId',\n          params: {\n            page,\n            userId\n          }\n        };\n      },\n      providesTags: result => result ? [...result.orders.map(_ref => {\n        let {\n          id\n        } = _ref;\n        return {\n          type: 'orders',\n          id\n        };\n      }), {\n        type: 'orders',\n        id: 'LIST'\n      }] : [{\n        type: 'orders',\n        id: 'LIST'\n      }]\n    }),\n    deleteOrder: build.mutation({\n      // query:(count:number)=>`Orders/GetAllOrders`\n      query: orderId => ({\n        url: `api/orders?id=${orderId}`,\n        method: \"DELETE\"\n      }),\n      invalidatesTags: [{\n        type: 'orders',\n        id: 'LIST'\n      }]\n    }),\n    updateOrder: build.mutation({\n      query: _ref2 => {\n        let {\n          id,\n          ...patch\n        } = _ref2;\n        return {\n          url: `api/orders?id=${id}`,\n          method: \"PUT\",\n          body: patch\n        };\n      },\n      invalidatesTags: [{\n        type: 'orders',\n        id: 'LIST'\n      }]\n    }),\n    addOrder: build.mutation({\n      query: body => {\n        return {\n          url: \"api/orders\",\n          method: \"POST\",\n          body\n        };\n      },\n      invalidatesTags: [{\n        type: 'orders',\n        id: 'LIST'\n      }]\n    })\n  })\n}); // prepareHeaders(headers, {getState}) {\n//     headers.set('Access-Control-Allow-Origin', '*')\n//     return headers\n// },\n// export const productApi=createApi({\n//     reducerPath:\"api/orders\",\n//     baseQuery:fetchBaseQuery({baseUrl:'http://fakestoreapi.com/'}),\n//     endpoints:build=>({\n//         getProducts:build.query<IOrder[],number>({\n//             query:(count:number)=>`Orders?limit=${count}`,\n//         }),\n//     }),\n// })\n\nexport const {\n  useGetProductsQuery,\n  useGetStringQuery,\n  useGetUserProductsQuery,\n  useDeleteOrderMutation,\n  useUpdateOrderMutation,\n  useAddOrderMutation\n} = productApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","productApi","reducerPath","tagTypes","baseQuery","baseUrl","endpoints","build","getProducts","query","arg","page","topics","console","log","url","params","getString","count","responseHandler","response","text","getUserProducts","userId","providesTags","result","orders","map","id","type","deleteOrder","mutation","orderId","method","invalidatesTags","updateOrder","patch","body","addOrder","useGetProductsQuery","useGetStringQuery","useGetUserProductsQuery","useDeleteOrderMutation","useUpdateOrderMutation","useAddOrderMutation"],"sources":["C:/Users/popov/vsprojs/react-app/src/store/order/order.api.ts"],"sourcesContent":["import { RootState } from \"@reduxjs/toolkit/dist/query/core/apiState\"\r\nimport { build } from \"@reduxjs/toolkit/dist/query/core/buildMiddleware/cacheLifecycle\"\r\nimport { BaseQueryFn, createApi, FetchArgs, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\"\r\nimport { store } from \"../store\"\r\nimport { IOrder, IOrderResponse, IUpdateOrder } from \"./order.type\"\r\n\r\n// ,prepareHeaders:(headers,{getState})=>{\r\n//   const token=store.getState().auth.token\r\n//   if(token){\r\n//     headers.set('Authorization',`Bearer ${token}`)\r\n//   }\r\n//   return headers\r\n// }\r\n\r\n\r\nexport const productApi = createApi({\r\n  reducerPath: \"api/orders\",\r\n  tagTypes: ['orders'],\r\n  baseQuery: fetchBaseQuery({ baseUrl: 'https://localhost:7197'}),\r\n  endpoints: build => ({\r\n    // getProducts:build.query<IOrderResponse,number>({\r\n    //     // query:(count:number)=>`Orders/GetAllOrders`\r\n    //     query:(page:number)=>({\r\n    //         url:`api/orders?page=${page}`,\r\n    //         responseHandler:(response)=>response.json()\r\n    //     })\r\n    // }),\r\n    getProducts: build.query<IOrderResponse, { page: number; topics: string[] }>({\r\n      query: (arg) => {\r\n        const { page, topics } = arg;\r\n        console.log('arg: ', arg);\r\n        return {\r\n          url: 'api/orders',\r\n          params: { page, topics },\r\n        };\r\n      },\r\n    }),\r\n    getString: build.query<string, number>({\r\n      query: (count: number) => ({\r\n        url: `Orders/GetAllOrdersstring`,\r\n        responseHandler: (response) => response.text()\r\n      })\r\n    }),\r\n    getUserProducts: build.query<IOrderResponse, { page: number; userId: number }>({\r\n      query: (arg) => {\r\n        const { page, userId } = arg;\r\n        console.log('arg: ', arg);\r\n        return {\r\n          url: 'api/orders/userId',\r\n          params: { page, userId },\r\n        };\r\n      },\r\n      providesTags: (result) =>\r\n        result\r\n          ? [\r\n            ...result.orders.map(({ id }) => ({ type: 'orders' as const, id })),\r\n            { type: 'orders', id: 'LIST' },\r\n          ]\r\n          : [{ type: 'orders', id: 'LIST' }],\r\n    }),\r\n    deleteOrder: build.mutation<void, number>({\r\n      // query:(count:number)=>`Orders/GetAllOrders`\r\n      query: (orderId: number) => ({\r\n        url: `api/orders?id=${orderId}`,\r\n        method: \"DELETE\",\r\n      }),\r\n      invalidatesTags: [{ type: 'orders', id: 'LIST' }]\r\n    }),\r\n    updateOrder: build.mutation<void, {id:number,title:string,description:string,cost:number,topic:string}>({\r\n      query: ({ id,...patch}) => {\r\n        return {\r\n          url: `api/orders?id=${id}`,\r\n          method: \"PUT\",\r\n          body:patch,\r\n        };\r\n      },invalidatesTags:[{type:'orders',id:'LIST'}]\r\n    }),\r\n\r\n    addOrder: build.mutation<void, {title:string,period:string,description:string,CreatorId:number,cost:number,topic:string}>({\r\n      query: (body:{title:string,period:string,description:string,CreatorId:number,cost:number,topic:string}) => {\r\n        return {\r\n          url:\"api/orders\",\r\n          method: \"POST\",\r\n          body,\r\n        };\r\n      },invalidatesTags:[{type:'orders',id:'LIST'}]\r\n    }),\r\n  }\r\n  ),\r\n})\r\n\r\n\r\n\r\n// prepareHeaders(headers, {getState}) {\r\n//     headers.set('Access-Control-Allow-Origin', '*')\r\n//     return headers\r\n// },\r\n// export const productApi=createApi({\r\n//     reducerPath:\"api/orders\",\r\n//     baseQuery:fetchBaseQuery({baseUrl:'http://fakestoreapi.com/'}),\r\n//     endpoints:build=>({\r\n//         getProducts:build.query<IOrder[],number>({\r\n//             query:(count:number)=>`Orders?limit=${count}`,\r\n//         }),\r\n//     }),\r\n// })\r\n\r\n\r\nexport const { useGetProductsQuery, useGetStringQuery, useGetUserProductsQuery, useDeleteOrderMutation, useUpdateOrderMutation , useAddOrderMutation } = productApi"],"mappings":"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"},"metadata":{},"sourceType":"module"}